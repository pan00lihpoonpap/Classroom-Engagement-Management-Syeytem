# 基于微信小程序的课堂活跃度管理系统 - 需求文档

## 1. 用户角色

### 1.1 教师角色
- 发起活动（签到、答题、测验、投票）
- 管理课程和班级
- 查看和管理学生数据
- 数据统计与可视化展示

### 1.2 学生角色
- 加入课程
- 参与活动（扫码签到、答题、测验、投票）
- 查看历史记录

---

## 2. 核心功能

### 2.1 用户管理
- 微信授权登录
- 角色选择（教师/学生）
- 个人信息管理

### 2.2 课程管理（教师）
- 创建课程（名称、代码、时间、地点）
- 编辑课程信息
- 归档/删除课程

### 2.3 班级管理（教师）
- 在课程下创建多个班级
- 添加/导入学生到指定班级
- 按班级查看学生列表
- 班级数据统计与对比
- 可视化展示（折线图、柱状图、饼图）

### 2.4 活动管理

#### 活动类型
1. **签到活动**：课堂考勤打卡
2. **讨论活动**：课堂互动讨论（开放式问题，学生回答后可查看其他同学的回答）
3. **测验活动**：课堂小测验（选择题自动批改）
4. **投票活动**：课堂投票表决

#### 教师功能
- 创建活动并设置参数
- 生成动态二维码
- 实时监控参与情况
- 控制活动状态（开始/暂停/结束）

#### 学生功能
- 扫码参与活动
- 提交回答/答案/投票
- 查看问题讨论和其他同学回答
- 查看测验结果反馈

### 2.5 数据管理（教师）

#### 签到管理
- 查看签到记录
- 补签功能
- 修改签到状态
- 导出签到数据

#### 讨论信息查看
- 查看学生回答内容
- 回答统计和词云分析
- 优质回答标记

#### 测验结果管理
- 选择题自动批改
- 成绩查看与分析
- 题目正确率统计
- 导出成绩单

#### 投票结果查看
- 投票统计
- 实时结果展示

#### 统计报告
- 课程整体数据报告
- 学期总结报告
- 活跃度趋势分析
- 数据导出（Excel/PDF）

### 2.6 历史记录
- 教师：查看所有历史活动及详情
- 学生：查看个人参与记录

### 2.7 课程参与（学生）
- 通过课程代码加入课程并选择班级
- 查看已加入的课程
- 退出课程

---

## 3. 技术架构

### 3.1 前端技术
- 微信小程序原生开发框架（可以考虑使用uni-app）
- WeUI组件库（或者按需调用阿里巴巴iconfont）
- ECharts图表库

### 3.2 后端技术
- Node.js + Express.js
- MySQL 8.0
- Redis缓存
- JWT认证

### 3.3 核心技术
- 动态二维码生成（qrcode库）
- 防作弊机制（时间限制、地理位置验证、设备限制）
- 数据可视化（多维度图表）

---

## 4. 非功能需求

### 4.1 性能需求
- 系统响应时间 < 2秒
- 支持并发用户数 > 100人
- 二维码生成时间 < 1秒

### 4.2 安全需求
- 数据加密存储
- 接口鉴权验证
- 防止二维码截图传播
- SQL注入和XSS攻击防护

### 4.3 可用性需求
- 系统可用性 > 99%
- 支持7×24小时运行
- 数据定期备份

---

## 5. 数据库设计要点

### 核心数据表
1. **用户表**：用户ID、OpenID、姓名、学号/工号、角色
2. **课程表**：课程ID、课程名称、课程代码、教师ID
3. **班级表**：班级ID、课程ID、班级名称
4. **选课表**：关联学生和班级
5. **活动表**：活动ID、课程ID、班级ID、活动类型、时间
6. **参与记录表**：学生参与活动的详细信息
7. **测验题目表**：题目内容、答案、分值
8. **测验答卷表**：学生答题记录和成绩

---

## 6. 系统架构图

```
┌─────────────────────────────────────┐
│         微信小程序端                 │
│    ┌──────────┐  ┌──────────┐       │
│    │  学生端   │  │  教师端   │       │
│    └──────────┘  └──────────┘       │
└──────────────┬──────────────────────┘
               │ HTTPS
               │
┌──────────────▼──────────────────────┐
│          后端API服务                 │
│  ┌────────────────────────────┐     │
│  │  用户 | 课程 | 班级 | 活动   │     │
│  └────────────────────────────┘     │
└──────────────┬──────────────────────┘
               │
┌──────────────▼──────────────────────┐
│      MySQL数据库 + Redis缓存         │
└─────────────────────────────────────┘
```

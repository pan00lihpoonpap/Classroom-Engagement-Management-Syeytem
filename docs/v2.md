# 一、登录注册 + 审核模块

## 学生端（微信小程序）

1. 微信快捷登录：打开小程序，点击“学生登录”，授权微信信息后完成初步登录；

2. 提交审核（无学生信息时）：填写：姓名、学号（格式校验：如“2024开头10位数字”）、专业、学院，上传校园卡/学生证照片（要求清晰显示姓名、学号，支持JPG/PNG，≤5MB）；

3. 审核状态：提交后显示“审核中”，核心功能（加入课堂、签到、答题）置灰；审核通过后自动激活全部功能，收到小程序弹窗通知；审核驳回显示原因（如“学号格式错误”“照片不清晰”），支持修改后重新提交；

4. 重新登录：审核通过后，后续打开小程序自动通过微信OpenID登录，无需重复输入信息。

## 教师端（Web端）

1. 手机号注册：打开Web端登录页，点击“注册”，输入手机号→获取短信验证码→设置登录密码（6-16位，含数字+字母）；

2. 提交审核：注册后跳转至“身份审核”页，或从“我的”进入“申请审核”，填写：工号、姓名、学院，上传工牌照片（清晰显示姓名、工号，支持JPG/PNG，≤5MB）；

3. 审核状态：提交后显示“审核中”，无法创建课堂等核心操作；审核通过后收到短信通知，登录即可激活全部功能；审核驳回显示原因，支持修改后重新提交；

4. 登录方式：审核通过后，用“手机号/工号+密码”登录，支持“记住密码”（有效期7天），忘记密码可通过手机号验证码重置。

## 管理员端（Web端）

1. 登录：内置超级管理员账号（账号：admin，初始密码：admin@123，首次登录强制修改）；

2. 审核操作：进入“待审核管理”，分“学生审核”“教师审核”两个标签页，列表显示提交人信息、提交时间、材料预览（点击照片放大）；

3. 审核结果：选择“通过”则直接激活账号；选择“驳回”需填写具体原因（如“学生证未显示学号”），系统自动同步给对应用户；

4. 批量操作：支持勾选多条记录“批量通过”，导出审核驳回列表（含驳回原因）。

5. 创建子管理员账号

# 二、核心功能

## 教师Web端核心功能

### 课堂管理

1. 创建课堂：登录后点击“创建课堂”，填写：课堂名称（如“2024级软工1班-Java程序设计”）、学期（下拉选择，如“2024-2025-1”）、课程简介（可选，≤500字），点击“创建”；

2. 生成准入凭证：课堂创建后自动生成“课堂邀请码”（8位字母+数字，如“JAVA2024A”）和“课堂二维码”，两者绑定同一课堂，有效期默认3天（可手动修改为1-7天）；

3. 编辑与关闭：进入“课堂设置”，可修改课堂名称、简介、邀请码有效期；点击“关闭课堂”（需二次确认），关闭后学生无法加入，历史数据可查看；

4. 学生管理：进入“学生列表”，显示已加入学生的姓名、学号、加入时间、活跃度得分；支持搜索学号/姓名定位学生，点击“移除学生”（需二次确认，移除后学生无法参与该课堂，历史数据保留）。

### 签到管理

#### 二维码签到

1. 发起签到：进入目标课堂，点击“发起签到”，设置“二维码有效期”（5-60分钟，默认15分钟），点击“生成二维码”；

2. 投屏展示：二维码自动放大显示，支持“下载二维码”保存本地，适配投影仪展示；旁边实时显示“已签到人数/总人数”“签到率”，未签到学生名单实时刷新；

3. 签到控制：支持“手动结束签到”（提前终止）或“延长有效期”（每次延长5-30分钟）；签到结束后显示完整统计：已签到、迟到（设置阈值，如10分钟后签到为迟到）、未签到人数及名单。

#### 课后补签

1. 补签申请处理：学生提交补签后，进入“补签管理”列表，显示学生姓名、学号、补签理由、申请时间、签到批次；

2. 审核操作：选择“同意补签”则修改该学生对应批次签到状态为“已补签”（标注“补签”字样，不影响签到率统计）；选择“驳回”需填写原因，同步给学生；

3. 限制：补签申请需在签到结束后24小时内提交，教师72小时内处理，同一批次每人仅可申请1次补签。

### 课堂互动

1. 发起提问：进入目标课堂，点击“发起提问”，选择题型（判断/单选/多选/思考题），填写题目内容（≤1000字）；
        客观题（判断/单选/多选）：需填写选项（单选3-6个，多选2-6个）、正确答案（后续可优化为自动判分）；

2. 思考题（主观题）：无需设置选项，学生输入文字回答；

3. 发布设置：设置“答题截止时间”（5分钟-24小时，课堂内实时答题建议10-60秒），点击“发布”，学生小程序端收到弹窗通知；

4. 实时查看：客观题实时显示“已答题人数/总人数”“各选项占比”；思考题实时显示答题人数，点击可查看学生回答内容（支持复制、标注）；

5. 历史管理：进入“提问历史”，按时间倒序显示所有提问，可查看“题目详情”“答题统计”（客观题正确率、主观题回答列表），支持“重新发起”“删除”操作。

### 活跃度统计与报告

1. 评分规则设置：进入“评分设置”，预设“签到占比60%、回答问题占比40%”，支持手动调整权重（两者之和100%）；可设置“签到基础分100分（迟到扣30分，未签到0分）”“答题基础分100分（客观题答对得满分，答错0分；思考题按参与度给分，提交得满分，未提交0分）”；

2. 数据计算：系统自动按权重计算学生活跃度得分（例：签到80分×60% + 答题90分×40% = 84分），实时更新；

3. 数据可视化：
        个人数据：学生姓名、学号、签到次数（含正常/迟到/补签）、答题次数（含客观/主观）、活跃度得分；

4. 排行展示：按活跃度得分降序排列，支持“导出排行榜”（Excel格式）；

5. 趋势图：显示班级平均活跃度得分周/月趋势，客观题平均正确率趋势。

6. 报告导出：点击“导出活跃度报告”，生成Excel文件，包含：课堂基本信息、学生名单、各次签到记录、各次答题记录、单次得分、总得分，可直接作为平时成绩依据。

## 学生微信小程序核心功能

### 加入课堂与扫码签到

#### 加入课堂

1. 准入方式：从首页“加入课堂”进入，选择“扫码加入”（扫描教师Web端课堂二维码）或“输入邀请码”（手动输入8位邀请码）；

2. 校验规则：系统自动校验邀请码/二维码有效性（是否过期、是否对应有效课堂）；若已加入该课堂，提示“已加入该课堂，无需重复加入”；校验通过后，提示“加入成功”，首页显示该课堂；

3. 课堂展示：首页按“未开始”“进行中”“已结束”分类展示已加入课堂，显示课堂名称、教师、下次上课时间（教师预设后显示）。

#### 扫码签到

1. 签到操作：进入目标课堂，点击“扫码签到”，调用微信相机扫描教师Web端投屏的签到二维码；

2. 有效性校验：若二维码已过期，提示“签到二维码已过期，请联系教师重新发起”；若已签到，提示“已完成签到，无需重复签到”；校验通过后，提示“签到成功”，显示签到时间；

3. 补签申请：未签到且签到已结束时，课堂内显示“申请补签”按钮，点击后填写补签理由（≤200字），提交后显示“补签申请中”，等待教师审核；审核结果通过小程序通知推送。

### 答题互动

1. 答题通知：教师发布题目后，小程序弹出弹窗通知（含“XX课堂有新题目”提示音，可手动关闭）；

2. 答题操作：进入对应课堂“答题中心”，查看题目内容、选项（客观题）、截止时间（倒计时显示）；
            客观题：点击选项选择答案，点击“提交”；提交后支持修改答案（需重新提交，以最后一次提交为准）；

3. 思考题：在输入框填写回答（≤500字），点击“提交”；提交后支持修改内容并重新提交；

4. 时间限制：倒计时结束后，答题入口关闭，无法提交或修改；未提交显示“答题超时，未得分”；

5. 答题记录：进入“答题历史”，查看各题目内容、自己的答案、答题时间、得分情况（客观题实时显示，思考题待教师确认后显示）。

### 个人中心

1. 个人信息：显示姓名、学号、专业、学院，支持“修改手机号”（需验证码校验）、“更换绑定微信”（需重新登录授权）；

2. 课堂信息：显示已加入的所有课堂，点击进入对应课堂；支持“退出课堂”（需二次确认，退出后历史数据不保留）；

3. 活跃度查询：进入对应课堂“我的活跃度”，查看：
        签到记录：各次签到时间、状态（正常/迟到/补签/未签到）；

4. 答题记录：各题目内容、自己的答案、得分；

5. 得分明细：单次课堂活跃度得分、总得分，班级排名等；

## 核心逻辑约束

- 身份唯一性：1个微信号仅可绑定1个学生身份；1个手机号仅可注册1个教师身份；学号/工号不可重复；

- 防重复规则：学生不可重复加入同一课堂；同一签到批次不可重复签到；同一题目不可重复提交（支持修改后重提交，计1次参与）；

- 数据隔离：教师仅可查看/管理自己创建的课堂数据；学生仅可查看自己的课堂数据；管理员可查看所有数据但不可修改课堂内容；

- 有效期规则：课堂邀请码/二维码默认3天，可手动调整；签到二维码有效期5-60分钟；补签申请24小时内提交，72小时内处理。


